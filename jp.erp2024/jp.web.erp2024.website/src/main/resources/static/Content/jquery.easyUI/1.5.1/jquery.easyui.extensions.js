/************************************************************************
 * jQuery easyui extensions Library
 * 
 * @ Version	: 1.0.6649.552
 * @ Author		: 孙亮
 * @ Date		: 2017-06-08
 * @ Email		: sunliang23456@126.com
 * 
 * Copyright (c) 2013-2016 sunliang23456@126.com. All Rights Reserved.
 * 
 * Licensed under the GPL or commercial licenses.
 * To use it on other terms please contact us: sunliang23456@126.com
 * 
 * 可自由使用和复制,但请保留以上版权信息.
 ************************************************************************/
;

var EXTENSIONS_CSS=[];EXTENSIONS_CSS.push(".combo-panel{-moz-user-select:none; -ms-user-select:none; -webkit-user-select:none; user-select:none; cursor: default;}"),function(n,t){var r,e,s,o,u,f,i;for(t.easyui=t.easyui||{},t.easyui.empty=function(n,i){return typeof n=="number"&&(isNaN(n)||!isFinite(n))?i:typeof n=="undefined"||n===""||n===null||t.isArray(n)&&n.length===0?i:n},r=function(n){var r,u,i;return n?n.Success===!1?(r=t(this).data("datagrid"),r&&(u=r.options,u.onLoadError.call(this,n)),[]):((n.Data!==undefined||n.Success!==undefined||n.Error!==undefined)&&(n=n.Data),!n)?[]:t.isArray(n)?n:n.PageSize||n.PageNumber||n.TotalCount?(i=n.Results||n.Result||n.Rows||[],i.PageSize=n.PageSize,i.PageNumber=n.PageNumber,i.TotalCount=n.TotalCount,i.PageCount=n.PageCount,i.Count=n.Count,i):(n.rows||n.total)&&(r=t(this).data("datagrid"),r)?(u=r.options,i=n.rows||[],i.PageSize=u.pageSize||10,i.PageNumber=u.pageNumber||0,i.TotalCount=n.total,i.PageCount=n.TotalCount/n.PageSize+(n.TotalCount%n.PageSize>0?1:0),i.Count=i.length,i):[]:[]},t.fn.datagrid.defaults.loadFilter=function(n){return n=r.call(this,n),{rows:n,total:n.TotalCount||n.length||0}},t.fn.combobox.defaults.loadFilter=r,t.fn.combotree.defaults.loadFilter=r,t.fn.tree.defaults.loadFilter=r,t.fn.propertygrid.defaults.loadFilter=r,t.fn.treegrid.defaults.loadFilter=t.fn.datagrid.defaults.loadFilter,t.fn.combogrid.defaults.loadFilter=t.fn.datagrid.defaults.loadFilter,t.fn.combo.defaults.width=200,t.fn.combotree.defaults.width=200,t.fn.combobox.defaults.width=200,t.fn.combogrid.defaults.width=200,t.fn.combotreegrid.defaults.width=200,t.fn.tagbox.defaults.width=200,t.fn.textbox.defaults.width=200,t.fn.searchbox.defaults.width=200,t.fn.numberbox.defaults.width=200,t.fn.numberspinner.defaults.width=200,t.fn.datebox.defaults.width=200,t.fn.datetimebox.defaults.width=200,t.fn.timespinner.defaults.width=200,t.fn.datetimespinner.defaults.width=200,t.fn.passwordbox.defaults.width=200,t.fn.validatebox.defaults.width=200,t.fn.combo.defaults.height=30,t.fn.combotree.defaults.height=30,t.fn.combobox.defaults.height=30,t.fn.combogrid.defaults.height=30,t.fn.combotreegrid.defaults.height=30,t.fn.tagbox.defaults.height=30,t.fn.textbox.defaults.height=30,t.fn.searchbox.defaults.height=30,t.fn.numberbox.defaults.height=30,t.fn.numberspinner.defaults.height=30,t.fn.datebox.defaults.height=30,t.fn.datetimebox.defaults.height=30,t.fn.timespinner.defaults.height=30,t.fn.datetimespinner.defaults.height=30,t.fn.passwordbox.defaults.height=30,t.fn.validatebox.defaults.height=30,e=t.fn.validatebox.defaults.rules,t.extend(t.fn.validatebox.defaults.rules,{email:{validator:function(n){return/^[\w_\.\-]+@[\w_\-]{1,}(?:\.\w+)+$/i.test(n)},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u7535\u5b50\u90ae\u7bb1(Email)\u5730\u5740\u683c\u5f0f."},url:{validator:function(n){return/^https?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=#;:!]*)?$/i.test(n)},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u6b63\u786e\u7684 url \u683c\u5f0f."},phone:{validator:function(n){return/^1(?:33|53|80|81|89|77|73|49|30|31|32|55|56|45|85|86|76|34|35|36|37|38|39|50|51|52|58|59|82|83|84|57|87|88|47|78|70|71|99|98|67|66|65|64|62|61)\d{8}$/.test(n)},message:"\u8f93\u5165\u6709\u6548\u7684\u7535\u8bdd\u683c\u5f0f."},phone_g:{validator:function(n){return/^[0-9\- ]{6,30}$/.test(n)},message:"\u8f93\u5165\u6709\u6548\u7684\u7535\u8bdd\u683c\u5f0f."},range:{validator:function(n,t){var r=parseFloat(n),i=parseFloat(t[0]),u=parseFloat(t[1]);return isNaN(r)||isNaN(i)||isNaN(u)?!1:i<=r&&i<=u},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u5b57\u683c\u5f0f\u4e14\u4ecb\u4e8e {0} \u4e0e {1} \u4e4b\u95f4."},password:{validator:function(n){return/^(?=.*?[0-9])(?=.*?[a-z])(?=.*?[A-Z])(?=.*?[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]).{8,30}$/.test(n)},message:"\u5fc5\u987b\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7279\u6b8a\u5b57\u7b26\uff0c\u957f\u5ea6\u57288\u523030\u4f4d\u4e4b\u95f4."},min:{validator:function(n,t){return t&&!isNaN(n)&&!isNaN(t[0])&&n>=t[0]},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u5b57\u683c\u5f0f\u4e14\u6700\u5c0f\u503c\u4e3a {0}."},max:{validator:function(n,t){return t&&!isNaN(n)&&!isNaN(t[0])&&n<=t[0]},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u5b57\u683c\u5f0f\u4e14\u6700\u5927\u503c\u4e3a {0}."},regex:{validator:function(n,t){return t&&t[0]&&new RegExp(t[0],t[1]||"ig").test(n)},message:"\u8f93\u5165\u7684\u5185\u5bb9\u4e0d\u7b26\u5408\u8981\u6c42!"},minLength:{validator:function(n,t){return e.length.validator(n,[t[0]])},message:"\u6700\u5c11\u8f93\u5165 {0} \u4e2a\u5b57\u7b26."},maxLength:{validator:function(n,t){return e.length.validator(n,[0,t[0]])},message:"\u6700\u591a\u8f93\u5165 {0} \u4e2a\u5b57\u7b26."},length:{validator:function(n,i){var r=t.trim(n).length,u=i[0]||0,f=i[1]||0;return(!u||r>=u)&&(!f||r<=f)},message:"\u8f93\u5165\u5185\u5bb9\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e {0} \u548c {1} \u4e2a\u5b57\u7b26\u6570\u4e4b\u95f4."},contains:{validator:function(n,t){return n&&t&&t[0]&&n.indexOf(t[0])>-1},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u5305\u542b {0}."},startsWith:{validator:function(n,t){return n&&t&&t[0]&&n.substr(0,t[0].length)==t[0]},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u4ee5 {0} \u4f5c\u4e3a\u8d77\u59cb\u5b57\u7b26."},endsWith:{validator:function(n,t){return n&&t&&t[0]&&n.substr(n.length-t[0].length,t[0].length)==t[0]},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u4ee5 {0} \u4f5c\u4e3a\u8d77\u59cb\u5b57\u7b26."},integer:{validator:function(n){return t.isNumeric(n)&&parseInt(n).toString()==n},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u5408\u6cd5\u7684\u6574\u6570\u683c\u5f0f."},numeric:{validator:function(n){return t.isNumeric(n)},message:"\u8f93\u5165\u7684\u5185\u5bb9\u5fc5\u987b\u662f\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u5b57\u683c\u5f0f."},equals:{validator:function(n,i){var r=i[0]||document.body,u=i[1]||"jquery";if(u)switch(String(u).toLowerCase()){case"jquery":case"dom":r=t(r).val();break;case"id":r=t("#"+r).val()}return n===r},message:"\u8f93\u5165\u7684\u5185\u5bb9\u4e0d\u5339\u914d."}}),t.fn.validatebox.defaults.validateOnCreate=!1,t.fn.validatebox.defaults.validateOnBlur=!0,t.easyui.theme={themes:[{value:"default",text:"Default",group:"Base"},{value:"gray",text:"Gray",group:"Base"},{value:"metro",text:"Metro",group:"Base"},{value:"material",text:"Material",group:"Base"},{value:"bootstrap",text:"Bootstrap",group:"Base"},{value:"metro-blue",text:"Metro Blue",group:"Metro"},{value:"metro-gray",text:"Metro Gray",group:"Metro"},{value:"metro-green",text:"Metro Green",group:"Metro"},{value:"metro-orange",text:"Metro Orange",group:"Metro"},{value:"metro-red",text:"Metro Red",group:"Metro"},{value:"ui-cupertino",text:"Cupertino",group:"UI"},{value:"ui-sunny",text:"Sunny",group:"UI"}],change:function(t,i){var r=function(n){for(var i,s,u,e,o,f=0;f<n.length;f++){i=n[f];try{for(s=(i.window||i.contentWindow.window).document.getElementsByTagName("link"),o=0;o<s.length;o++)if(u=s[o],e=u.getAttribute("href"),u.id&&u.id.indexOf("themes")>-1||e&&e.indexOf("themes")>-1){u.setAttribute("href",e.replace(/themes\/.*?\//i,"themes/"+t+"/"));break}}catch(h){}i.frames.length>0&&r(i.frames)}};r([n.top]);i!==!1&&n.localStorage&&n.localStorage.setItem("easyui.theme",t)},get:function(){for(var r=document.getElementsByTagName("link"),n,t,i=0;i<r.length;i++)if(n=r[i],t=n.getAttribute("href"),n.id&&n.id.indexOf("themes")>-1||t&&t.indexOf("themes")>-1)return/themes\/(.*?)\//i.exec(t)[1];return"default"},load:function(){var i=n.localStorage,t;i&&(t=i.getItem("easyui.theme"));t&&t.length>0&&this.change(t)},reset:function(){this.change("default")}},t.easyui.theme.load(),s=t.fn.textbox.parseOptions,t.fn.textbox.parseOptions=function(n){var t=s.call(n,n);return n.placeholder&&(t.prompt=n.placeholder),t},o=["combo","combobox","combotree","combogrid"],u={},f=0;f<o.length;f++)i=o[f],t.fn[i].defaults.reversed=!0,u[i]=t.fn[i].defaults.inputEvents.focus,t.fn[i].defaults.inputEvents.focus=function(n){var r=n.data.target,e=t.data(r,"combo"),f=e.options;u[i]&&u[i].call(this,n);f.editable==!0&&f.readonly!=!0&&t(r).combo("showPanel")}}(window,jQuery),function(n,t){var i=t.fn.panel.defaults.loader,r=t.fn.panel.parseOptions;t.fn.panel.defaults.loader=function(r,u,f){var s=this,c=t.data(s,"panel"),o=c.options,h,e;o.href&&(o.iframe||o.iniframe)?(t(s).css({overflow:"hidden"}),h=t(s).find(".panel-loading"),o.extractor=function(n){return n},e=t('<iframe class="panel-iframe" id="iframe_'+n.frames.length.toString()+"_"+(o.href.split(/:\/\/[^\/]*\/|^\//)[1]||"/").split("[?#]")[0]+'" title="'+(o.id||o.title||"")+'" frameborder="0" width="100%" height="100%" marginwidth="0px" marginheight="0px" scrolling="auto"><\/iframe>'),e[0].onload=function(){e[0].loaded||(e.show(),h.remove(),e[0].timer&&clearInterval(e[0].timer),e[0].loaded=!0)},e[0].timer=setInterval(function(){try{var n=e[0].contentWindow.document.readyState;(n=="complete"||n=="interactive")&&e[0].onload()}catch(t){e[0].onload()}},500),e.attr("src",o.href),e.hide(),u(e),t(s).append(h)):i.call(this,r,u,f)};t.fn.dialog.defaults.loader=t.fn.panel.defaults.loader;t.fn.window.defaults.loader=t.fn.panel.defaults.loader;t.fn.panel.parseOptions=function(n){var i=r.call(n,n);return i.refreshable&&i.href&&(i.iniframe||i.iframe)&&(i.tools||(i.tools=[]),i.tools.push({iconCls:"icon-mini-refresh",handler:function(){t(n).panel("refresh")}})),i};EXTENSIONS_CSS.push(".panel-loading{display:inline-block;top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;}.tabs-p-tool{top: 12px;}.tabs-close{top: 14px;}")}(window,jQuery),function(n,t){var i=t.fn.tabs.defaults.onContextMenu,u=function(n,r,u){t.isFunction(i)&&i.apply(this,arguments);var f=t(this),a=f.tabs("options"),c=f.tabs("tabs");if(a.enableConextMenu){n.preventDefault();var l=f.tabs("getTab",u),s=l.panel("options"),e=t.grep(c,function(n,t){return t<u&&n.panel("options").closable}),o=t.grep(c,function(n,t){return t>u&&n.panel("options").closable}),v=e.length>0||o.length>0,y=e.length>0||o.length>0||s.closable,p=[{text:"\u5237\u65b0\u9009\u9879\u5361",iconCls:"icon-standard-table-refresh",disabled:!s.refreshable,handler:function(){f.tabs("getTab",u).panel("refresh",u)}},{text:"-"},{text:"\u5173\u95ed\u9009\u9879\u5361",iconCls:"icon-standard-application-form-delete",disabled:!s.closable,handler:function(){f.tabs("close",u)}},{text:"\u5173\u95ed\u5de6\u4fa7\u9009\u9879\u5361",iconCls:"icon-standard-tab-close-left",disabled:!e.length,handler:function(){t.each(e,function(n,t){f.tabs("close",f.tabs("getTabIndex",t))})}},{text:"\u5173\u95ed\u53f3\u4fa7\u9009\u9879\u5361",iconCls:"icon-standard-tab-close-right",disabled:!o.length,handler:function(){t.each(o,function(n,t){f.tabs("close",f.tabs("getTabIndex",t))})}},{text:"-"},{text:"\u5173\u95ed\u5176\u4ed6\u9009\u9879\u5361",iconCls:"icon-standard-cancel",disabled:!v,handler:function(){var n=[];n=n.concat(e);n=n.concat(o);t.each(n,function(n,t){f.tabs("close",f.tabs("getTabIndex",t))})}},{text:"\u5173\u95ed\u6240\u6709\u9009\u9879\u5361",iconCls:"icon-standard-cross",disabled:!y,handler:function(){var n=[];n=n.concat(e);n=n.concat(o);s.closable&&n.push(f);t.each(n,function(n,t){f.tabs("close",f.tabs("getTabIndex",t))})}},],h=t("<div><\/div>").appendTo(document.body).menu({left:n.pageX,top:n.pageY,onClick:function(){setTimeout(function(){h.menu("destroy");h=null},500)},onHide:function(){l=null;c=null;s=null;e=null;o=null}});t.each(p,function(n,t){h.menu("appendItem",t)});h.menu("show")}},r;t.fn.tabs.defaults.onContextMenu=u;r=t.fn.tabs.methods.add;t.fn.tabs.methods.add=function(n,i){return i.refreshable&&i.href&&(i.iframe||i.iniframe)&&(i.tools||(i.tools=[]),i.tools.push({iconCls:"icon-mini-refresh",handler:function(){var n=t(this).closest("li"),i=n.index();n.closest(".tabs-container").tabs("getTab",i).panel("refresh")}})),r.call(this,n,i)};t.fn.tabs.methods.refresh=function(n,i,r){if(t.isPlainObject(i))return t.fn.tabs.methods.refresh.call(n,n,i.which||i.title||i.index,i.url);var u=n.tabs("getTab",i);return u&&u.panel("refresh",r),n}}(window,jQuery),function(n,t){var h=t.fn.datagrid.defaults.headerEvents.contextmenu,o=t.fn.datagrid.defaults.headerEvents.mouseover;t.fn.datagrid.defaults.headerEvents.contextmenu=function(n){var r=t(n.target).closest(".datagrid-view").children(".datagrid-f:hidden"),l=r.datagrid("options"),o=t(n.target).closest("td[field]").attr("field"),h=r.data("headMenu")||r.data("headMenu",{"-":!0,_:!0,"@":!0}).data("headMenu"),i=h[o||"_@_"],e,u,c,f,a,s;if(n.preventDefault(),l.headerContextMenu!==!1){if(o){if(!i){if(e=r.datagrid("getColumnOption",o),e.headerContextMenu===!1)return;if(i=t("<div/>").appendTo("body"),i._events=t.fn.menu.defaults.events,i.menu({left:n.pageX,top:n.pageY,hideOnUnhover:!1,minWidth:150,itemHeight:"auto",events:t.extend({},i._events,{click:function(n){var r=t(n.target),u;(r.is(".menu-item")||(r=r.closest(".menu-item")).length)&&(u=r.data("menuitem").options,u.custom||i._events.click.call(this,n))}}),onHide:function(){n.onHide&&n.onHide()}}),h[o]=i,i.menu("appendItem",{parent:undefined,text:"\u5347\u5e8f",disabled:!e.sortable,iconCls:"icon-standard-hmenu-asc",onclick:function(){r.datagrid("sort",{sortName:o,sortOrder:"asc"})}}),i.menu("appendItem",{parent:undefined,text:"\u964d\u5e8f",disabled:!e.sortable,iconCls:"icon-standard-hmenu-desc",onclick:function(){r.datagrid("sort",{sortName:o,sortOrder:"desc"})}}),e.headerContextMenu&&e.headerContextMenu.length)for(i.menu("appendItem",{separator:!0}),f=0;f<e.headerContextMenu.length;f++)u=e.headerContextMenu[f],!u.custom&&u.type&&u.onChange&&(u={iconCls:u.iconCls||"icon-filter",custom:u,text:u.text}),u.custom&&(u.custom.context=r),i.menu("appendItem",u)}}else if(!i)for(i=t("<div/>").appendTo("body"),i._events=t.fn.menu.defaults.events,i.menu({left:n.pageX,top:n.pageY,hideOnUnhover:!1,minWidth:120,events:t.extend({},i._events,{click:function(n){n.preventDefault()}})}),h["_@_"]=i,c=r.datagrid("getColumnFields"),f=0;f<c.length;f++)(a=c[f],s=r.datagrid("getColumnOption",a),s.checkbox)||i.menu("appendItem",{parent:undefined,text:s.title||s.field,iconCls:s.hidden?"tree-checkbox0":"tree-checkbox1",disabled:!1,option:s,onclick:function(){var n=t(this).data("menuitem").options.option;r.datagrid(n.hidden===!0?"showColumn":"hideColumn",n.field);t(this).children(".menu-icon").toggleClass("tree-checkbox0").toggleClass("tree-checkbox1")}});return i instanceof jQuery&&i.menu("show",{left:n.pageX,top:n.pageY}),l.onHeaderContextMenu.call(r,n,o),!1}};t.fn.datagrid.defaults.headerEvents.mouseover=function(n){var i,r,u,f;(o.call(this,n,!0),i=t(n.target).closest("td"),i[0]&&i[0].menuinit!==!0)&&(i[0].menuinit=!0,r=i.attr("field"),r!="-"&&r!="_")&&(u=t(n.target).closest(".datagrid-view").children(".datagrid-f:hidden"),f=u.datagrid("options"),f.headerContextMenu!==!1)&&t('<div class="s-btn-downarrow datagrid-header-cell-menu">&nbsp;<\/div>').click(function(n){var i=t(this),r=i.offset();return n.pageX=r.left,n.pageY=r.top+t(this).height(),n.onHide=function(){i.removeClass("datagrid-header-cell-menu-show")},i.addClass("datagrid-header-cell-menu-show"),t.fn.datagrid.defaults.headerEvents.contextmenu.call(null,n),!1}).appendTo(i)};var s=t.fn.datagrid.defaults.loader,i=function(n,i,r){return r.Text!==null&&r.Text!==undefined?r.Text:i&&t.isFunction(i)?i(n,null,-1):n},f={compare:{_0:"\u7b49\u4e8e",_1:"\u4e0d\u7b49\u4e8e",_2:"\u5927\u4e8e",_3:"\u5927\u4e8e\u7b49\u4e8e",_4:"\u5c0f\u4e8e",_5:"\u5c0f\u4e8e\u7b49\u4e8e",_6:"\u65e0\u503c",_7:"\u6709\u503c"},like:{_0:"\u4efb\u4f55\u4f4d\u7f6e",_1:"\u5f00\u59cb\u5904",_2:"\u7ed3\u5c3e\u5904",_3:"\u7cbe\u786e\u5339\u914d",_4:"\u65e0\u503c",_5:"\u4e0d\u5b58\u5728\u4efb\u4f55\u4f4d\u7f6e",_6:"\u4e0d\u5b58\u5728\u5f00\u59cb\u5904",_7:"\u4e0d\u5b58\u5728\u7ed3\u5c3e\u5904",_8:"\u4e0d\u5b58\u5728\u7cbe\u786e\u5339\u914d",_9:"\u6709\u503c"},any:{_0:"\u5305\u542b",_1:"\u6392\u9664"},delimiter:{_0:"\u5168\u90e8\u5305\u542b",_1:"\u542b\u5176\u4e2d\u4e00\u4e2a",_2:"\u5168\u90e8\u4e0d\u5305\u542b",_3:"\u4e0d\u5305\u542b\u5176\u4e2d\u4e00\u4e2a"}},u=function(n){var l=t.data(n,"datagrid"),y=l.options,a=l.filter,o,s,c;if(a){n=t(n);var r=null,u=[],e=null,h=null,v=y.filterData||{};for(o in v)if((r=v[o],r&&r.filterBar!==!1)&&(e=n.datagrid("getColumnOption",o),h=(r.Type||"").toLowerCase(),e&&(!e.filterable||e.filterable===!1)))switch(h){case"compare":(r.Value===undefined||r.Value===null)&&!r.Operator||(s=f[h]["_"+r.Operator.toString()],u.push('<span class="tagbox-label datagrid-filter-item"><b>['+e.title+"]<\/b>:"),s?((r.Operator==6||r.Operator==7)&&(r.Value=""),u.push("<b>{<\/b>"+s+"<b>}<\/b> "+i(r.Value,e.formatter,r))):u.push("<b style='color:#f00'>\u9519\u8bef<\/b>"),u.push('<a href="javascript:void(0);" class="tagbox-remove datagrid-filter-close" data-filter="{\'Field\':\''+o+"','Value':null,'Operator':0}\"><\/a><\/span>"));break;case"like":case"any":case"delimiter":(r.Value===undefined||r.Value===null)&&!r.Mode||(s=f[h]["_"+r.Mode.toString()],u.push('<span class="tagbox-label datagrid-filter-item"><b>['+e.title+"]<\/b>:"),s?(h=="like"&&(r.Mode==4||r.Mode==9)&&(r.Value=""),u.push("<b>{<\/b>"+s+"<b>}<\/b> "+i(r.Value,e.formatter,r))):u.push("<b style='color:#f00'>\u9519\u8bef<\/b>"),u.push('<a href="javascript:void(0);" class="tagbox-remove datagrid-filter-close" data-filter="{\'Field\':\''+o+"','Value':null,'Mode':0}\"><\/a><\/span>"));break;case"id":case"range":default:if(r.Value!==null&&r.Value!==undefined){if(u.push('<span class="tagbox-label datagrid-filter-item"><b>['+e.title+"]<\/b>:"),r.Text===undefined&&t.isArray(r.Value))for(c=0;c<r.Value.length;c++)u.push((c>0?",":"")+i(r.Value[c],e.formatter,r));else u.push(i(r.Value,e.formatter,r));u.push('<a href="javascript:void(0);" class="tagbox-remove datagrid-filter-close" data-filter="{\'Field\':\''+o+"','Value':null}\"><\/a><\/span>")}else(r.StartValue!==null&&r.StartValue!==undefined||r.EndValue!==null&&r.EndValue!==undefined)&&(u.push('<span class="tagbox-label datagrid-filter-item"><b>['+e.title+"]<\/b>:"),r.Text?u.push(r.Text):(u.push(r.StartValue==undefined||r.StartValue==null?"\u221e":i(r.StartValue,e.formatter,r)),u.push("\u81f3"),u.push(r.EndValue==undefined||r.EndValue==null?"\u221e":i(r.EndValue,e.formatter,r))),u.push('<a href="javascript:void(0);" class="tagbox-remove datagrid-filter-close" data-filter="{\'Field\':\''+o+"','StartValue':null,'EndValue':null}\"><\/a><\/span>"))}u.length==0?u.push('<span class="tagbox-label datagrid-filter-item datagrid-filter-none">\u663e\u793a\u5168\u90e8<\/span>'):u.push('<span class="tagbox-label datagrid-filter-item datagrid-filter-clear" title=\'\u6e05\u9664\u5f53\u524d\u6240\u6709\u7b5b\u9009\u6761\u4ef6\'><a href="javascript:void(0);" class="tagbox-remove datagrid-filter-close"><\/a><\/span>');a.html(u.join(""))}},r=function(n,i,f){var h=t.data(n,"datagrid"),s=h.options,l=h.filter,o=s.filterData,c,e;if(t.isArray(i)){c=i.length-1;t.each(i,function(t,i){r(n,i,t!==c)});return}if(e=i.Field||i.Key,!e)throw new Error("\u7b5b\u9009\u672a\u6307\u5b9aField");(delete i.Field,delete i.Key,i.Value=t.easyui.empty(i.Value,null),i.StartValue=t.easyui.empty(i.StartValue,null),i.EndValue=t.easyui.empty(i.EndValue,null),o||(o=s.filterData={}),o[e]?t.extend(o[e],i):o[e]=i,s.onFilter&&s.onFilter.call(n,e,i),f!=!0)&&(l&&u(n),t(n).datagrid("load"))},e=function(n){var o=t.data(n,"datagrid"),s=o.options,f=s.filterData||{},e={},r,i,u;for(u in f)r=f[u],r&&(r.Sort||r.Value!==undefined&&r.Value!==null||r.StartValue!==undefined&&r.StartValue!==null||r.EndValue!==undefined&&r.EndValue!==null||!!r.Operator||!!r.Mode)&&(e[u]=i=t.extend({},r),i.Value===null&&delete i.Value,i.StartValue===null&&delete i.StartValue,i.EndValue===null&&delete i.EndValue,i.Mode||delete i.Mode,i.Operator||delete i.Operator,i.Sort||delete i.Sort,i.Text!==null&&delete i.Text,i.Type!==null&&delete i.Type);return e};t.fn.datagrid.defaults.loader=function(n,i,f){var h=this,o=t.data(h,"datagrid"),c=o.options,l=e(h),a=o.filter;o.filter===undefined&&(c.filter?(o.filter=t(c.filter).addClass("datagrid-filter").on("click",".datagrid-filter-close",function(){var nullValue=eval("("+(t(this).attr("data-filter")||"null")+")"),_siblings,l;return nullValue?r(h,nullValue):(_siblings=t(this).closest(".datagrid-filter").find(".datagrid-filter-close[data-filter]"),l=_siblings.length-1,_siblings.each(function(i,item){nullValue=eval("("+t(this).attr("data-filter")+")");r(h,nullValue,i<l)})),!1}),a=o.filter,u(h)):o.filter=!1);n=t.extend(n,{filter:JSON.stringify(l)});n.pageNumber=n.page;n.pageSize=n.rows;delete n.page;delete n.rows;delete n.order;delete n.sort;s.call(this,n,i,f)};t.fn.datagrid.defaults.onFilter=t.noop;t.fn.datagrid.defaults.filter=null;t.fn.datagrid.defaults.filterData=null;t.fn.datagrid.defaults.method="POST";t.fn.datagrid.defaults.singleSelect=!0;t.fn.datagrid.defaults.selectOnCheck=!1;t.fn.datagrid.defaults.checkOnSelect=!1;t.fn.datagrid.defaults.rownumbers=!0;t.fn.datagrid.defaults.striped=!0;t.fn.datagrid.defaults.border=!1;t.fn.datagrid.defaults.pagination=!0;t.fn.datagrid.defaults.pageNumber=1;t.fn.datagrid.defaults.pageSize=10;t.fn.datagrid.defaults.pageList=[10,20,30,40,50];t.fn.datagrid.defaults.remoteSort=!0;t.fn.datagrid.defaults.loadMsg="\u7a0b\u5e8f\u6b63\u5728\u52aa\u529b\u7684\u52a0\u8f7d\u6570\u636e \u8bf7\u7a0d\u5019......";t.fn.datagrid.defaults.emptyMsg="O_O! \u6682\u65e0\u6570\u636e";t.fn.datagrid.defaults.fitColumns=!1;t.fn.datagrid.defaults.fit=!0;t.fn.datagrid.defaults.onBeforeSortColumn=function(n,i){var s=this,h=t.data(s,"datagrid"),f=h.options,r=f.filterData,e=i=="asc"?1:-1,o,u;r||(r=f.filterData={});for(o in r)u=r[o],!u||!u.Sort||(u.Sort=0);return r[n]?r[n].Sort=e:r[n]={Sort:e},!0};t.fn.datagrid.methods.filterLoad=function(n,t){return n.each(function(){r(this,t)})};t.fn.datagrid.methods.filterRander=function(n){return n.each(function(){u(this)})};t.fn.datagrid.methods.getFilterData=function(n){return e(n[0])};EXTENSIONS_CSS.push(".datagrid-header-row td{ position: relative;}.datagrid-header-row td:hover .datagrid-header-cell-menu{display:block;}.datagrid-header-cell-menu {display:none; margin: 0; cursor: pointer;background-color: rgba(255, 255, 255, 0.6);border-left-width: 1px;width: 24px;height: 100%;position: absolute;top: 0;right: 2px;border-left-style: dotted;background-position-x:6px;z-index: 2; }.datagrid-header-cell-menu-show{display:block;}.datagrid-filter { min-height: 24px;cursor: default;-moz-user-select:none; -ms-user-select:none; -webkit-user-select:none; user-select:none; cursor: default; }.datagrid-filter-item {display: inline-block; cursor: default; height: 24px;line-height: 24px; vertical-align: middle;cursor:pointer;}.datagrid-filter-item img {max-width:14px; max-height:14px;vertical-align: middle;}.datagrid-filter-close {}.datagrid-filter-none,.datagrid-filter-clear {}.datagrid-filter-none {padding-right:5px; }.datagrid-filter-clear {background-color: #FFD1D1; margin-left: 15px; }.datagrid-filter-clear .tagbox-remove{ right:inherit; }")}(window,jQuery),function(n,t){var r=t.fn.menu.methods.appendItem,i={init:function(n,i,r){var u,f,e;if(r&&r.custom&&(u=t.extend(!0,{},this.defaults,r.custom),u.type)){i=t(i);i.removeAttr("style");f=i.children("div.menu-text").css({background:"transparent","padding-left":"28px","padding-top":3,"padding-bottom":3,float:"none"});e=t("<div><\/div>").addClass("menu-content").css({background:"transparent","padding-left":"28px","padding-top":3,"padding-bottom":3}).appendTo(i);r.text||f.css({"padding-top":0,"padding-bottom":0,height:0});u.init&&t.isFunction(u.init)&&u.init.call(i,r,n);u.type=u.type.toLowerCase();u.offsetWidth=0;u.context||(u.context=u);switch(u.type){case"calendar":case"combo":case"combobox":case"combotree":case"searchbox":case"calendar":case"datalist":case"comparefilter":case"likefilter":case"idfilter":case"anyfilter":case"rangefilter":case"minidatalist":case"delimiterfilter":u.range=!1}u.type.indexOf(":")>0&&(u.type=u.type.split(":"),u.oldType=u.type[1],u.type=u.type[0],u.rangefilter=!0);u.range===!0?(u.oldType=u.type,u.type="rangefilter"):u.type=="rangefilter"&&(u.rangefilter=!0,u.range=!0);u.value=u.value||"";this.createControl(u,e,u.value,function(){u.range===!0&&u.oldType&&u.rangefilter!==!0?u.onChange.call(u.context,arguments[0].StartValue,arguments[0].EndValue):u.onChange.apply(u.context,arguments);u.type.indexOf("combo")>-1&&setTimeout(function(){t(document.body).children(".combo-p:visible").children(".combo-panel").panel("close")},0);n.menu("hide")});u.initEnd&&t.isFunction(u.initEnd)&&u.initEnd.call(i,r,n);f._outerWidth((r.width||r.options&&r.options.width||200)+u.offsetWidth)}},controls:{searchbox:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.editable=!0,n.options.searcher=function(t){u.call(n.context,t==""?null:t)},f.searchbox(n.options),f.searchbox("setValue",r||""),f},combobox:function(n,i,r,u){var f=null,e;if(f=t("<select><\/select>").appendTo(i),n.options.multiple!==!0?(n.options.value="",n.options.onSelect=function(t){n.inited&&u.call(n.context,t[n.options.valueField],t)}):n.options.value=[],f.combobox(n.options),n.inited=!0,n.options=f.combobox("options"),n.options.multiple===!0)e=t("<div class='panel-footer'><\/div>").css({"border-top-style":"none",padding:"5px 0","text-align":"center"}).appendTo(f.combo("panel").parent()),t('<a iconCls="icon-search">\u7b5b\u9009<\/a>').linkbutton().click(function(){t(this).focus();var r=f.combobox("getValues"),i=[],e=f.combobox("getData"),o=t.map(e,function(u){var f=u[n.options.valueField];return t.inArray(f.toString(),r)>-1?(i.push(f),u):null});return f.combo("hidePanel"),u.call(n.context,i.length?i:null,i.length?o:null),!1}).appendTo(e);else{n.options=f.combobox("options");f.combobox("panel").on("click",".combobox-item-selected",function(){var r=f.combobox("getData"),i=r[t(this).index()];return u.call(n.context,i[n.options.valueField],i),!1})}return f},datebox:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.onChange=function(t){t?u.call(n.context,t):u.call(n.context,null)},n.options.value="",f.datebox(n.options),f},datetimebox:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.onChange=function(t){t?u.call(n.context,t):u.call(n.context,null)},n.options.value="",f.datetimebox(n.options),f},monthbox:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.onSelect=function(t){t?u.call(n.context,t):u.call(n.context,null)},f.monthbox(n.options),f},combotree:function(n,i,r,u){var f=null,e;return n.options.value="",f=t("<input/>").appendTo(i),n.options.multiple!==!0&&(n.options.onSelect=function(t){u.call(n.context,t.id,t)}),f[n.cotr||"combotree"](n.options),n.options=f.combotree("options"),n.options.multiple===!0&&(e=t("<div class='panel-footer'><\/div>").css({"border-top-style":"none",padding:"5px 0","text-align":"center"}).appendTo(f.combo("panel").parent()),t('<a iconCls="icon-search">\u7b5b\u9009<\/a>').linkbutton().click(function(){t(this).focus();var r=f.combotree("tree"),i=r.tree("getChecked",["checked","indeterminate"]),e=t.map(i,function(n){return n.id});return f.combo("hidePanel"),u.call(n.context,i.length?e:null,i.length?i:null),!1}).appendTo(e)),f},combotreesearch:function(n,t,i,r){return n.cotr="combotreesearch",this.controls.combotree(n,t,i,r)},tree:function(n,i,r,u){var f=null,e,o;return n.options.value="",n.options.lines=!0,n.options.fit=!0,e=t('<div class="calendar"><\/div>').css({"background-color":"#fff",padding:0,"margin-right":5}).appendTo(i),f=t("<ul/>").appendTo(t("<div><\/div>").css({height:n.options.height||200,width:200,overflow:"auto"}).appendTo(e)),n.options.multiple!==!0?n.options.onSelect=function(t){u.call(n.context,t.id,t)}:n.options.checkbox=!0,f.tree(n.options),n.options=f.tree("options"),n.options.multiple===!0&&(o=t("<div class='panel-footer'><\/div>").css({"border-style":"solid none none none",padding:"5px 0","text-align":"center"}).appendTo(e),t('<a iconCls="icon-search">\u7b5b\u9009<\/a>').linkbutton().click(function(){t(this).focus();var i=f.tree("getChecked",["checked","indeterminate"]),r=t.map(i,function(n){return n.id});return u.call(n.context,i.length?r:null,i.length?i:null),!1}).appendTo(o)),f},datalist:function(n,i,r,u){var f=null,e,o;return n.options.value="",n.options.lines=!0,n.options.fit=!0,n.options.height=n.options.height||200,n.options.multiple!==!0||n.options.singleSelect===!0?(n.options.checkbox=!1,n.options.multiple=!1,n.options.onSelect=function(t){u.call(n.context,t[n.options.valueField],t)}):(n.options.checkbox=!0,n.options.multiple=!0),e=t("<div><\/div>").css({"margin-right":"5px",height:n.options.multiple?n.options.height+40:n.options.height,overflow:"hidden"}).appendTo(i),f=t("<table/>").appendTo(t("<div><\/div>").css({height:n.options.height}).appendTo(e)),f.minidatalist(n.options),n.options=f.minidatalist("options"),n.options.multiple===!0&&(o=t("<div class='panel-footer'><\/div>").css({"border-top-style":"none",padding:"5px 0","text-align":"center"}).appendTo(e),t('<a iconCls="icon-search">\u7b5b\u9009<\/a>').linkbutton().click(function(){t(this).focus();var i=f.minidatalist("getChecked"),r=t.map(i,function(t){return t[n.options.valueField]});return u.call(n.context,i.length?r:null,i.length?i:null),!1}).appendTo(o)),f},calendar:function(n,i,r,u){var f=null;return f=t("<div><\/div>").appendTo(i),n.options.onSelect=function(t){t?(t=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),u.call(n.context,t)):u.call(n.context,null)},f.calendar(n.options),f},numberbox:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.value=r,n.options.editable=!0,n.range===!1?n.options.icons=[{iconCls:"icon-search",handler:function(){var i=parseFloat(f.numberbox("getValue"));u.call(n.context,t.easyui.empty(i,null))}}]:n.options.onChange=function(i){var r=parseFloat(i);u.call(n.context,t.easyui.empty(r,null))},f.numberbox(n.options),f},numberspinner:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.value=r,n.options.editable=!0,n.options.spinAlign="horizontal",n.range===!1?n.options.icons=[{iconCls:"icon-search",handler:function(){var i=parseFloat(f.numberspinner("getValue"));u.call(n.context,t.easyui.empty(i,null))}}]:n.options.onChange=function(i){var r=parseFloat(i);u.call(n.context,t.easyui.empty(r,null))},f.numberspinner(n.options),f},timespinner:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.editable=!0,n.options.spinAlign="horizontal",n.range===!1?n.options.icons=[{iconCls:"icon-search",handler:function(){var i=f.timespinner("getValue");u.call(n.context,t.easyui.empty(i,null))}}]:n.options.onChange=function(i){u.call(n.context,t.easyui.empty(i,null))},f.timespinner(n.options),f},datetimespinner:function(n,i,r,u){var f=null;return f=t("<input/>").appendTo(i),n.options.editable=!0,n.options.spinAlign="horizontal",n.range===!1?n.options.icons=[{iconCls:"icon-search",handler:function(){var i=f.datetimespinner("getValue");u.call(n.context,t.easyui.empty(i,null))}}]:n.options.onChange=function(i){u.call(n.context,t.easyui.empty(i,null))},f.datetimespinner(n.options),f},idfilter:function(n,t,i,r){return this.controls.numberbox(n,t,i,function(t){r.call(n.context,{Value:t,Type:"Id"})})},comparefilter:function(n,i,r,u){var f=null,e=t("<select><\/select>").appendTo(i);return e.combobox({editable:!1,data:[{text:"\u7b49\u4e8e",value:0},{text:"\u4e0d\u7b49\u4e8e",value:1},{text:"\u5927\u4e8e",value:2},{text:"\u5927\u4e8e\u7b49\u4e8e",value:3},{text:"\u5c0f\u4e8e",value:4},{text:"\u5c0f\u4e8e\u7b49\u4e8e",value:5},{text:"\u65e0\u503c",value:6},{text:"\u6709\u503c",value:7}],value:r.Operator||0,width:80,panelWidth:200,panelHeight:200}),f=t("<input/>").appendTo(i),f.data("compareOperator",e),n.options.width=120,n.options.editable=!0,n.options.searcher=function(i){var r=parseInt(t(this).data("compareOperator").combobox("getValue"));switch(r){case 6:case 7:i=0}u.call(n.context,{Operator:r,Value:t.easyui.empty(i,null),Type:"Compare"})},f.searchbox(n.options),f},likefilter:function(n,i,r,u){var f=null,e=t("<select><\/select>").appendTo(i);return e.combobox({editable:!1,data:[{text:"\u4efb\u4f55\u4f4d\u7f6e",value:0},{text:"\u5f00\u59cb\u5904",value:1},{text:"\u7ed3\u5c3e\u5904",value:2},{text:"\u7cbe\u786e\u5339\u914d",value:3},{text:"\u65e0\u503c",value:4},{text:"\u4e0d\u5b58\u5728\u4efb\u4f55\u4f4d\u7f6e",value:5},{text:"\u4e0d\u5b58\u5728\u5f00\u59cb\u5904",value:6},{text:"\u4e0d\u5b58\u5728\u7ed3\u5c3e\u5904",value:7},{text:"\u4e0d\u5b58\u5728\u7cbe\u786e\u5339\u914d",value:8},{text:"\u6709\u503c",value:9}],value:r.Operator||0,width:80,panelWidth:200,panelHeight:260}),f=t("<input/>").appendTo(i),n.options.width=120,n.options.editable=!0,n.options.value="",n.options.searcher=function(t){var i=parseInt(e.combobox("getValue"));switch(i){case 4:case 9:t=null}u.call(n.context,{Mode:i,Value:t||null,Type:"Like"})},f.searchbox(n.options),f},anyfilter:function(n,i,r,u){var f,e,o;return n.data?(f=null,e=t("<select><\/select>").appendTo(i),e.combobox({editable:!1,data:[{text:"\u5305\u542b",value:0},{text:"\u6392\u9664",value:1}],value:r.Operator||0,width:80,panelWidth:200,panelHeight:80}),n.options.multiple=!0,n.options.width=120,f=t("<select><\/select>").appendTo(i),f.combobox(n.options),n.options=f.combobox("options"),o=t("<div class='panel-footer'><\/div>").css({"border-top-style":"none",padding:"5px 0","text-align":"center"}).appendTo(f.combo("panel").parent()),t('<a iconCls="icon-search">\u7b5b\u9009<\/a>').linkbutton().click(function(){var r;t(this).focus();var o=f.combobox("getValues"),i=[],s=f.combobox("getData");return t.each(s,function(r,u){var f=u[n.options.valueField];t.inArray(f.toString(),o)>-1&&i.push(f)}),f.combo("hidePanel"),r=parseInt(e.combobox("getValue")),u.call(n.context,{Mode:r,Value:i.length?i:null,Type:"Any"}),!1}).appendTo(o),f):(n.separator=n.separator||/[^0-9]+/g,this.controls.searchbox(n,i,r,function(i){if(i!=null){i=i.split(n.separator);var r=[],f=/^\-?[\d]+(?:.[0-9]+)?$/i;t.each(i,function(n,t){t!==""&&(f.test(t)?r.push(parseFloat(t)):r.push(t))});i=r.length?r:null}u.call(n.context,{Value:i,Type:"Any",Mode:0})}))},delimiterfilter:function(n,i,r,u){var f=null,e=t("<select><\/select>").appendTo(i);return e.combobox({editable:!1,data:[{text:"\u5168\u90e8\u5305\u542b",value:0},{text:"\u542b\u5176\u4e2d\u4e00\u4e2a",value:1},{text:"\u5168\u90e8\u4e0d\u5305\u542b",value:2},{text:"\u4e0d\u5305\u542b\u5176\u4e2d\u4e00\u4e2a",value:3}],value:r.Operator||0,width:80,panelWidth:200,panelHeight:120}),f=t("<input/>").appendTo(i),n.options.width=120,n.options.editable=!0,n.options.value="",n.separator=n.separator||/[^0-9]+/g,n.options.searcher=function(i){var o=parseInt(e.combobox("getValue")),r,f;i=i.split(n.separator);r=[];f=/^\-?[\d]+(?:.[0-9]+)?$/i;t.each(i,function(n,t){t!==""&&(f.test(t)?r.push(parseFloat(t)):r.push(t))});u.call(n.context,{Mode:o,Value:r.length?r:null,Type:"Delimiter"})},f.searchbox(n.options),f},rangefilter:function(n,i,r,u){var f;n.value&&n.value.StartValue!=undefined||(n.value={StartValue:null,EndValue:null});n.type=n.oldType;n.type||(n.type="datebox");f=t('<div class="calendar"><\/div>').css({"background-color":"#fff",padding:0,"margin-right":5,width:198}).appendTo(i);n.options.width-=15;var o=this.createControl(n,t("<div><\/div>").css("padding",5).appendTo(f),n.value.StartValue,function(t){n.value.StartValue=t}),s=this.createControl(n,t("<div><\/div>").css("padding",5).appendTo(f),n.value.EndValue,function(t){n.value.EndValue=t}),e=t("<div class='panel-footer'><\/div>").css({"border-style":"solid none none none",padding:"5px 0","text-align":"center"}).appendTo(f);t('<a iconCls="icon-search">\u7b5b\u9009<\/a>').linkbutton().click(function(){return t(this).focus(),u.call(n,{StartValue:n.value.StartValue||null,EndValue:n.value.EndValue||null,Type:"Range"}),!1}).appendTo(e)}},createControl:function(n,t,r,u){n.options.data=n.data;n.options.editable=n.options.editable||!1;n.options.selectOnNavigation=!1;n.options.reversed=!0;try{return this.controls[n.type].call(i,n,t,r,u)}catch(f){console.log(f)}},defaults:{type:null,options:{width:200},key:"",range:!1,value:null,data:null,init:null,initEnd:null,onChange:function(){}}};t.fn.menu.methods.appendItem=function(n,u){return u.text&&u.text=="-"&&(u.separator=!0),r.call(t.fn.menu.methods,n,u),n.each(function(){u.custom&&i.init(t(this),this.children[this.children.length-1],u)})};EXTENSIONS_CSS.push(".menu-item .datagrid-body{ position: relative;}.menu-item .datagrid-body::-webkit-scrollbar { width: 8px; height: 8px; }.menu-item .datagrid-body::-webkit-scrollbar-track { background-color: #fff; }.menu-item .datagrid-body::-webkit-scrollbar-thumb { background: #aaa; }.menu-item .datagrid-body::-webkit-scrollbar-thumb:vertical:hover { background: #4e4e4e; }")}(window,jQuery),function(n,t){var i=function(n){var i=t.data(n,"minidatalist"),u=i.options,r=[];return i.view.find("tr.datagrid-row-checked").each(function(n,u){var n=parseInt(t(u).attr("data-i"));r.push(i.data[n])}),r},f=function(n,i,u){var o=t.data(n,"minidatalist"),f=o.options,e;(i&&(f.url=i),e=t.extend({},f.queryParams),f.onBeforeLoad.call(n,e)!=!1)&&f.loader.call(n,e,function(t){r(n,t,u)},function(){f.onLoadError.apply(this,arguments)})},r=function(n,i){var r=t.data(n,"minidatalist"),u=r.options;r.data=u.loadFilter.call(n,i);o.call(n,n,r.data);u.onLoadSuccess.call(n,i)},u=function(n,i){var e=t.data(n,"minidatalist"),r=e.options,u=e.data,f=t(e.view[0].children[0].rows[i]);f.hasClass("datagrid-row-checked")?r.multiple?(f.removeClass("datagrid-row-selected datagrid-row-checked").find("input").prop("checked",!1),r.onUnselect.call(n,u[i])):r.onSelect.call(n,u[i]):(r.multiple||f.siblings(".datagrid-row-checked").each(function(i,f){var i=parseInt(t(f).attr("data-i"));t(f).removeClass("datagrid-row-selected datagrid-row-checked").find("input").prop("checked",!1);r.onUnselect.call(n,u[i])}),f.addClass("datagrid-row-selected datagrid-row-checked").find("input").prop("checked",!0),r.onSelect.call(n,u[i]))},e=function(n,i){if(i){t.isArray(i)||(i=[i]);var r=t.data(n,"minidatalist"),e=r.data,f=r.options;t.each(e,function(t,r){for(var s=r[f.valueField].toString(),e=0,o=i.length;e<o;e++)if(i[e]+""===s)return u(n,t),f.multiple})}},o=function(n,i){var o=t.data(n,"minidatalist"),r=o.options,e=[],s,h,c,l,a=t.isArray(r.value)?r.value:!r.value?[]:[r.value],f;for(e.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'),f=0;f<i.length;f++)(s=i[f],h=r.formatter.call(n,s,r),c=s[r.valueField],l=t.inArray(c,r.value)>-1,h)&&e.push('<tr class="datagrid-row'+(l?" datagrid-row-selected datagrid-row-checked":"")+'" style="height: 25px;"  data-i="'+f+'"><td><input type="'+(r.multiple?"checkbox":"radio")+'" name="'+(r.name||"")+'" value="'+(c||"")+'"'+(l?' checked="checked"':"")+'/><\/td><td><div style="height:auto;" class="datagrid-cell datagrid-cell-c2-Name">'+h+"<\/div><\/td><\/tr>");e.push("<\/tbody><\/table>");o.view.html(e.join(""));o.view.on("click","tr",function(t){if(t.target.nodeName!="INPUT")return u(n,parseInt(t.currentTarget.getAttribute("data-i"))),!1}).on("change","input",function(i){var r=t(i.currentTarget).closest("tr");return u(n,parseInt(r.attr("data-i"))),!1}).on("mouseenter","tr",function(){return t(this).addClass("datagrid-row-over"),!1}).on("mouseleave","tr",function(){return t(this).removeClass("datagrid-row-over"),!1})},s=function(n,i){var u=i.options;u.multiple=u.multiple||u.singleSelect||!1;u.fit&&(u.height=t(n).parent().height()||u.height,u.width="auto");i.view=t("<div><\/div>").addClass("panel-body panel-body-noheader datagrid-body minidatalist").insertAfter(t(n).hide().removeAttr("name")).css({height:u.height,width:u.width});u.url?f(n,null,!0):u.data&&r(n,u.data)};t.fn.minidatalist=function(n,i){return typeof n=="string"?t.fn.minidatalist.methods[n](this,i):(n=n||{},this.each(function(){var i=t.data(this,"minidatalist");i?t.extend(i.options,n):(i=t.data(this,"minidatalist",{options:t.extend({},t.fn.minidatalist.defaults,t.fn.minidatalist.parseOptions(this),n)}),s(this,i))}),this)};t.fn.minidatalist.parseOptions=function(n){return t.extend({},t.parser.parseOptions(n,["width","height","name","id",{fit:"boolean"}]),{data:n.nodeName=="SELECT"?t.map(n.options,function(n){return{value:n.value,text:n.text}}):undefined,value:t(n).val(),multiple:!!n.getAttribute("multiple")})};t.fn.minidatalist.methods={options:function(n){return t.data(n[0],"minidatalist").options},getChecked:function(n){return i(n[0])},getData:function(n){return t.data(n[0],"minidatalist").data},reload:function(n,i){return t.each(n,function(){i&&(typeof i=="string"?f(this,i,!0):r(this,i,!0))})},clear:function(n){n.next().find(".datagrid-row-checked").removeClass("datagrid-row-selected datagrid-row-checked").find("input").attr("checked",!1)},setValues:function(n,i){return t.each(n,function(){e(n[0],i)})},setValue:function(n,i){return t.each(n,function(){e(n[0],i)})},getValues:function(n){var r=t.data(n[0],"minidatalist").options.valueField;return t.map(i(n[0]),function(n){return n[r]})},getValue:function(n){var r=i(n[0]);return r.length?r[0][t.data(n[0],"minidatalist").options.valueField]:null},destroy:function(n){return n.next().remove()}};t.fn.minidatalist.defaults={width:200,height:200,fit:!1,multiple:!1,method:"post",formatter:function(n,t){return n[t.textField]},textField:"text",valueField:"value",loadFilter:function(n){return n},onSelect:function(){},onUnselect:function(){},onBeforeLoad:function(){},onLoadError:function(){},onLoadSuccess:function(){},loader:function(n,i,r){var u=t(this).minidatalist("options");if(!u.url)return!1;t.ajax({type:u.method,url:u.url,data:n,dataType:"json",success:function(n){i(n)},error:function(){r.apply(this,arguments)}})}};EXTENSIONS_CSS.push(".minidatalist{ position: relative; }.minidatalist table{ width:100%; }.minidatalist table td:first-child{width:25px;overflow: auto;overflow-x: hidden;}.minidatalist table td{ width:100%;border-width: 0 0 1px 0;cursor: default;}.minidatalist::-webkit-scrollbar { width: 8px; height: 8px; }.minidatalist::-webkit-scrollbar-track { background-color: #fff; }.minidatalist::-webkit-scrollbar-thumb { background: #aaa; }.minidatalist::-webkit-scrollbar-thumb:vertical:hover { background: #4e4e4e; }");t.parser.plugins.push("minidatalist")}(window,jQuery),function(n,t){var r=function(n){var r=t.data(n,"monthbox"),h=r.options,f=['<div class="calendar calendar-noborder monthbox"><div class="calendar-body monthbox-body"><div class="calendar-menu-year-inner"><span class="calendar-nav calendar-menu-prev"><\/span><span><input class="calendar-menu-year" type="text"><\/span><span class="calendar-nav calendar-menu-next"><\/span><\/div>'],u,e,o,s;for(f.push('<div class="calendar-menu-month-inner"><table class="calendar-mtable"><tbody>'),u="",e=0;e<3;e++){for(f.push("<tr>"),o=1;o<5;o++)u=(e*4+o).toString(),u.length<2&&(u="0"+u),f.push('<td class="calendar-nav calendar-menu-month" abbr="'+u+'">'+u+"<\/td>");f.push("<\/tr>")}f.push("<\/tbody><\/table><\/div><\/div><\/div>");r.panel.html(f.join(""));r.yearTextBox=r.panel.find(".calendar-menu-year-inner input");r.panel.on("click",".calendar-menu-month",function(){return i(n,{month:t(this).attr("abbr"),year:r.yearTextBox.val()}),t(n).combo("hidePanel"),!1}).on("click",".calendar-menu-prev",function(){return r.yearTextBox.val(parseInt(r.yearTextBox.val())-1),!1}).on("click",".calendar-menu-next",function(){return r.yearTextBox.val(parseInt(r.yearTextBox.val())+1),!1}).on("mouseover",".calendar-nav",function(){var n=t(this);return n.hasClass("calendar-nav-hover")||n.hasClass("calendar-selected")||n.addClass("calendar-nav-hover"),!1}).on("mouseout",".calendar-nav",function(){var n=t(this);return n.hasClass("calendar-nav-hover")&&!n.hasClass("calendar-selected")&&n.removeClass("calendar-nav-hover"),r.panel.find(".calendar-nav-hover").removeClass("calendar-nav-hover"),!1});s=r.combo.find(".combo-arrow");s.css("background-image",s.css("background-image").replace("combo_arrow.png","datebox_arrow.png"))},i=function(n,i,r){var u=t.data(n,"monthbox"),f=u.options,e;typeof i=="string"?u.date=f.parse(i):i&&u.date!=i&&t.extend(u.date,i);u.panel.find(".calendar-menu-month-inner .calendar-selected").removeClass("calendar-selected");u.panel.find('.calendar-menu-month-inner .calendar-nav[abbr="'+u.date.month+'"]').addClass("calendar-selected");u.yearTextBox.val(u.date.year);r||(e=f.formatter.call(n,u.date,f),t(n).combo("setText",e).combo("setValue",e),f.onSelect.call(n,e,f))},u=function(n,u){var f=u.options;f.panelHeight="auto";f.readonly=!1;f.editable=!1;u.panel=t(n).combo(f).combo("panel");u.textbox=t(n).combo("textbox");u.combo=t(n).next().addClass("monthbox");u.date=f.parse(f.value);r(n);i(n,u.date,!0)};t.fn.monthbox=function(n,i){if(typeof n=="string"){var r=t.fn.monthbox.methods[n];return r?r(this,i):this.combo(n,i)}return n=n||{},this.each(function(){var i=t.data(this,"monthbox");i?t.extend(i.options,n):(i=t.data(this,"monthbox",{options:t.extend({},t.fn.monthbox.defaults,t.fn.monthbox.parseOptions(this),n)}),u(this,i))}),this};t.fn.monthbox.parseOptions=function(n){return t.extend({},t.parser.parseOptions(n,["width","height","name","id","value"]))};t.fn.monthbox.methods={options:function(n){return t.data(n[0],"monthbox").options},setValue:function(n,t){return this.each(function(){_setValues(this,t)})},getValue:function(n){return t(n[0]).combo("getValue")},destroy:function(n){return n.next().remove()}};t.fn.monthbox.defaults={width:200,height:30,parse:function(n){var t=null,i;return n?(i=n.split(/[-/ ]/g),t={year:parseInt(i[0]).toString(),month:parseInt(i[1]||"1").toString()}):(i=new Date,t={year:i.getFullYear().toString(),month:(i.getMonth()+1).toString()}),t.month.length<2&&(t.month="0"+t.month),t},formatter:function(n){return n.year+"-"+(n.month.length<2?"0"+n.month:n.month)},onSelect:function(){}};EXTENSIONS_CSS.push(".monthbox .calendar-menu-year-inner{ padding-top: 8px;line-height: 30px;}.monthbox .calendar-menu-year-inner span{ vertical-align: middle; }.monthbox .calendar-menu-year-inner .calendar-menu-year{ padding: 5px; }.monthbox .calendar-menu-month-inner{height: 120px;}.monthbox .combo-arrow{background-position: center center;}");t.parser.plugins.push("monthbox")}(window,jQuery),function(n,t){var i=function(n,i){i.tree=t(n).combotree("tree");i.panel=t(n).combotree("panel");i.panel.parent().addClass("combotreesearch-panel");i.searchbox=t("<div><\/div>").addClass("panel-header combotreesearch-panel-header").insertBefore(i.panel).html("<input/>").find("input");i.searchbox.searchbox({prompt:"\u5728\u6b64\u5904\u7b5b\u9009...",searcher:function(n){i.tree.tree("doFilter",n||"")},icons:[{iconCls:"icon-clear",handler:function(){i.tree.tree("doFilter","");i.searchbox.searchbox("clear")}}]})};t.fn.combotreesearch=function(n){return typeof n=="string"?t.fn.combotree.methods[n]:(n=t.extend(n||{},t.fn.combotreesearch.defaults),this.each(function(){var r=t.data(this,"combotreesearch");r?(t.extend(r.options,n),t.extend(t(this).combotree("options"),n)):(t(this).combotree(n),r=t.data(this,"combotreesearch",{options:n}),i(this,r))}),this)};t.fn.combotreesearch.methods={search:function(n,i){return this.each(function(){t.data(this,"tree").tree("doFilter",i||"")})}};t.fn.combotreesearch.defaults={filter:function(n,t){return t.text.toLowerCase().indexOf(n.toLowerCase())>=0}};EXTENSIONS_CSS.push(".combotreesearch-panel{background-color: #ffffff;}.combotreesearch-panel .searchbox{ border:none!important;box-shadow: none !important;}.combotreesearch-panel .combotreesearch-panel-header{ padding: 2px 0!important;background: #fff!important;border-bottom-width: 0; }");t.parser.plugins.push("combotreesearch")}(window,jQuery),function(n,t){var i=t.fn.combotree;i.defaults.allowParent=!0;t.fn.combotree=function(n,r){var e=i.call(this,n,r),o=this;if(typeof n=="object"&&!n.multiple&&(!n.allowParent||n.allowParent===!1)){var f=i.call(o,"tree"),u=f.tree("options"),s=u.onClick||t.noop,h=u.onBeforeSelect||t.noop;u.allowParent=!1;u.onClick=function(n){return u.allowParent?s.call(f[0],n):!1};u.onBeforeSelect=function(n,t){var i=h.call(f[0],n,t);return u.allowParent=i||!(n.children&&n.children.length>0),u.allowParent}}return e};t.each(["defaults","parseOptions","methods"],function(n,r){t.fn.combotree[r]=i[r]})}(window,jQuery),function(n,t){t.fn.datebox.defaults.buttons.splice(1,0,{text:function(){return"\u6e05\u9664"},handler:function(n){t(n).datebox("clear",null).combo("hidePanel")}});t.fn.datetimebox.defaults.buttons.splice(1,0,{text:function(){return"\u6e05\u9664"},handler:function(n){t(n).datetimebox("clear",null).combo("hidePanel")}})}(window,jQuery),function(n,t){t("<style>"+EXTENSIONS_CSS.join("\r\n")+"<\/style>").attr("type","text/css").appendTo("head")}(window,jQuery)